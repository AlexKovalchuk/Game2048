<Window
    x:Class="Game2048.Desktop.MainWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:vm="clr-namespace:Game2048.Desktop.ViewModels"
    x:DataType="vm:GameViewModel"
    Background="#faf8ef"
    Width="540" Height="700"
    d:DesignWidth="540" d:DesignHeight="700">

    <!-- ðŸŸ¦ Ð¡Ð¢Ð˜Ð›Ð† Ð”Ð›Ð¯ ÐšÐÐžÐŸÐšÐ˜ NEW GAME -->
    <Window.Styles>

        <!-- Ð‘Ð°Ð·Ð¾Ð²Ð¸Ð¹ ÑÑ‚Ð¸Ð»ÑŒ -->
        <Style Selector="Button.new-game-button">
            <Setter Property="Background" Value="#C5F5C7"/>
            <Setter Property="Foreground" Value="#2f4f2f"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="14,6"/>
            <Setter Property="BorderBrush" Value="#8BCF90"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Center"/>

            <!-- ÐÐ½Ñ–Ð¼Ð°Ñ†Ñ–Ñ Ð·Ð¼Ñ–Ð½Ð¸ Background -->
            <Style.Animations>
                <Animation Duration="0:0:0.1">
                    <KeyFrame Cue="0%">
                        <Setter Property="Background" Value="#C5F5C7"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Background" Value="#A8E3AB"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- Hover -->
        <Style Selector="Button.new-game-button:pointerover">
            <Setter Property="Background" Value="#A8E3AB"/>
            <Setter Property="BorderBrush" Value="#7FBF85"/>
        </Style>

        <!-- Disabled -->
        <Style Selector="Button.new-game-button:disabled">
            <Setter Property="Background" Value="#D8E8D8"/>
            <Setter Property="Foreground" Value="#8FA48F"/>
            <Setter Property="BorderBrush" Value="#C4D5C4"/>
        </Style>

    </Window.Styles>

    <Design.DataContext>
        <vm:GameViewModel />
    </Design.DataContext>

    <Window.KeyBindings>
        <KeyBinding Command="{Binding MoveUpCommand}" Gesture="Up" />
        <KeyBinding Command="{Binding MoveDownCommand}" Gesture="Down" />
        <KeyBinding Command="{Binding MoveLeftCommand}" Gesture="Left" />
        <KeyBinding Command="{Binding MoveRightCommand}" Gesture="Right" />
        <KeyBinding Command="{Binding NewGameCommand}" Gesture="R" />
    </Window.KeyBindings>

    <!-- ðŸŸ© ÐžÐ¡ÐÐžÐ’ÐÐ˜Ð™ Ð†ÐÐ¢Ð•Ð Ð¤Ð•Ð™Ð¡ -->
    <Grid RowDefinitions="Auto Auto *" Margin="20">

        <!-- Ð’ÐµÑ€Ñ…Ð½Ñ–Ð¹ Ð±Ð°Ñ€ -->
        <Grid Margin="0,16,0,8" ColumnDefinitions="Auto,*,Auto">

            <TextBlock Grid.Column="0"
                       Text="2048"
                       FontSize="36"
                       FontWeight="Bold"
                       Foreground="#776e65"
                       VerticalAlignment="Center" />

            <StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        Spacing="8"
                        VerticalAlignment="Center">

                <Border Background="#bbada0"
                        CornerRadius="4"
                        Padding="8,4">
                    <StackPanel>
                        <TextBlock Text="SCORE"
                                   FontSize="10"
                                   Foreground="#eee4da"
                                   HorizontalAlignment="Center" />
                        <TextBlock Text="{Binding Score}"
                                   FontSize="16"
                                   FontWeight="Bold"
                                   Foreground="#ffffff"
                                   HorizontalAlignment="Center" />
                    </StackPanel>
                </Border>

                <Border Background="#bbada0"
                        CornerRadius="4"
                        Padding="8,4">
                    <StackPanel>
                        <TextBlock Text="SIZE"
                                   FontSize="10"
                                   Foreground="#eee4da"
                                   HorizontalAlignment="Center" />
                        <TextBlock Text="{Binding BoardSize}"
                                   FontSize="16"
                                   FontWeight="Bold"
                                   Foreground="#ffffff"
                                   HorizontalAlignment="Center" />
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° New Game -->
            <Button Grid.Column="2"
                    Classes="new-game-button"
                    Content="New Game"
                    Command="{Binding NewGameCommand}" />
        </Grid>

        <!-- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð³Ñ€Ð¸ -->
        <TextBlock Grid.Row="1"
                   Text="{Binding StateText}"
                   Foreground="#776e65"
                   FontSize="16"
                   Margin="0,12,0,12" />

        <!-- Ð†Ð³Ñ€Ð¾Ð²Ðµ Ð¿Ð¾Ð»Ðµ -->
        <Border Grid.Row="2"
                Background="#bbada0"
                CornerRadius="8"
                Padding="8">

            <ItemsControl ItemsSource="{Binding Tiles}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Rows="{Binding BoardSize}"
                                     Columns="{Binding BoardSize}" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate x:DataType="vm:TileViewModel">
                        <Border Width="110"
                                Height="110"
                                Margin="6"
                                CornerRadius="6"
                                Background="{Binding Background}"
                                BorderBrush="#cdc1b4"
                                BorderThickness="2">

                            <TextBlock Text="{Binding Value}"
                                       FontSize="32"
                                       FontWeight="Bold"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Foreground="{Binding Foreground}" />
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

        </Border>

    </Grid>

</Window>
